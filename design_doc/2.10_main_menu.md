# 2.10 主菜单设计 (Main Menu Design)

## 2.10.1 概述
主菜单是玩家进入游戏的第一个界面，提供开始新游戏、继续游戏、设置和退出等基本功能。此外，主菜单还集成了调试工具，便于开发者管理全局数据。

## 2.10.2 视觉设计
- **背景**：全屏显示海洋背景 (`assets/images/oceanbackground.png`)，营造航海氛围。
- **标题**："Cruising" 使用大号加粗白色字体，带有阴影效果，位于屏幕顶部中央。
- **布局**：按钮垂直排列在屏幕中央，标题位于按钮上方。
- **风格**：按钮使用简洁的白色圆角矩形，深蓝色文字，与海洋背景形成对比。

## 2.10.3 功能按钮
1. **新游戏 (New Game)**
   - 功能：开始一个新的游戏会话。
   - 交互：点击后通过淡入淡出动画（800ms）跳转到 `GameScreen`。
   - 逻辑：重置游戏状态（目前每次进入 `GameScreen` 都会重新初始化）。

2. **继续游戏 (Continue)**
   - 功能：自动读取时间最近的一个存档并继续游戏。
   - 逻辑：扫描所有存档槽位，按时间戳降序排序，加载第一个。
   - 状态：如果无存档，弹出提示框 "暂无存档"。

3. **读取存档 (Load Game)**
   - 功能：进入存档管理界面 (`SaveLoadScreen`)。
   - 交互：显示所有存档槽位（自动 + 手动），允许玩家选择读取。

4. **设置 (Settings)**
   - 功能：调整游戏设置。
   - 交互：点击弹出对话框。
   - 基础选项：
     - 音乐开关
     - 音效开关
   - 显示设置（仅桌面端）：
     - **全屏模式**：切换窗口/全屏显示。
     - **分辨率选择**：在窗口模式下，提供多种分辨率预设（如 1280x720, 1920x1080 等），选择后自动调整窗口大小并居中。

5. **退出 (Exit)**
   - 功能：退出应用程序。
   - 实现：调用 `SystemNavigator.pop()`。
   - **Web 端处理**：由于浏览器安全限制，Web 平台下隐藏此按钮。

## 2.10.4 调试功能
主菜单集成了全局 **Debug Panel**（位于屏幕右上角），无需进入游戏即可使用。
- **入口**：右上角悬浮按钮（虫子图标）。
- **主要功能**：
  - **删除所有存档**：一键清空所有游戏进度，用于重置测试环境。
  - **状态监控**：虽然不在游戏内，但保留了面板结构，方便扩展其他全局调试功能。

## 2.10.5 文件结构
- `lib/screens/main_menu_screen.dart`: 主菜单界面的实现，包含平台检测逻辑和 DebugPanel 集成。
- `lib/screens/game_screen.dart`: 游戏主界面的实现。
- `lib/game/debug_panel.dart`: 调试面板组件，支持在主菜单复用。
- `lib/main.dart`: 应用程序入口，负责初始化窗口管理器（Desktop）并加载 `MainMenuScreen`。

## 2.10.6 导航流程
```mermaid
graph TD
    AppStart[应用启动] --> MainMenu[主菜单 MainMenuScreen]
    MainMenu -->|点击新游戏| Game[游戏界面 GameScreen]
    MainMenu -->|点击继续| AutoLoad[加载最新存档]
    MainMenu -->|点击读取存档| SaveLoad[存档管理界面]
    SaveLoad -->|选择槽位| Game
    MainMenu -->|点击设置| SettingsDialog[设置对话框]
    SettingsDialog -->|桌面端| DisplaySettings[分辨率/全屏设置]
    MainMenu -->|点击退出 (非Web)| Exit[退出应用]
    MainMenu -.->|Debug Panel| DeleteSaves[删除所有存档]
```

## 2.10.7 依赖库
- `window_manager`: 用于桌面端的窗口大小控制、全屏切换和居中显示。
